.\"Generated by db2man.xsl. Don't modify this, modify the source.
.de Sh \" Subsection
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Ip \" List item
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.TH "WBINFO" 1 "" "" ""
.SH "NAME"
wbinfo - Query information from winbind daemon
.SH "SYNOPSIS"
.HP 1
wbinfo [-a user%password] [--all-domains] [--allocate-gid] [--allocate-uid] [-D domain] [--domain domain] [-g] [--getdcname domain] [--get-auth-user] [-G gid] [-h] [-i user] [-I ip] [-K user%password] [-m] [-n name] [-N netbios-name] [--own-domain] [-p] [-r user] [-s sid] [--separator] [--sequence] [--set-auth-user user%password] [-S sid] [-t] [-u] [--user-domgroups sid] [--user-sids sid] [-U uid] [-V] [-Y sid]
.SH "DESCRIPTION"
.PP
This tool is part of the
\fBsamba\fR(7)
suite.
.PP
The
wbinfo
program queries and returns information created and used by the
\fBwinbindd\fR(8)
daemon.
.PP
The
\fBwinbindd\fR(8)
daemon must be configured and running for the
wbinfo
program to be able to return information.
.SH "OPTIONS"
.PP
-a|--authenticate username%password
.RS 3n
Attempt to authenticate a user via winbindd. This checks both authenticaion methods and reports its results.
.sp
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
\fBNote\fR
Do not be tempted to use this functionality for authentication in third-party applications. Instead use
\fBntlm_auth\fR(1).
.RE
.PP
--allocate-gid
.RS 3n
Get a new GID out of idmap
.RE
.PP
--allocate-uid
.RS 3n
Get a new UID out of idmap
.RE
.PP
--all-domains
.RS 3n
List all domains (trusted and own domain).
.RE
.PP
--domain name
.RS 3n
This parameter sets the domain on which any specified operations will performed. If special domain name '.' is used to represent the current domain to which winbindd belongs. Currently only the
\fB--sequence\fR,
\fB-u\fR, and
\fB-g\fR
options honor this parameter.
.RE
.PP
-D|--domain-info domain
.RS 3n
Show most of the info we have about the domain.
.RE
.PP
-g|--domain-groups
.RS 3n
This option will list all groups available in the Windows NT domain for which the
\fBsamba\fR(7)
daemon is operating in. Groups in all trusted domains will also be listed. Note that this operation does not assign group ids to any groups that have not already been seen by
\fBwinbindd\fR(8).
.RE
.PP
--get-auth-user
.RS 3n
Print username and password used by winbindd during session setup to a domain controller. Username and password can be set using
\fB--set-auth-user\fR. Only available for root.
.RE
.PP
--getdcname domain
.RS 3n
Get the DC name for the specified domain.
.RE
.PP
-G|--gid-to-sid gid
.RS 3n
Try to convert a UNIX group id to a Windows NT SID. If the gid specified does not refer to one within the idmap gid range then the operation will fail.
.RE
.PP
-i|--user-info user
.RS 3n
Get user info.
.RE
.PP
-I|--WINS-by-ip ip
.RS 3n
The
\fI-I\fR
option queries
\fBwinbindd\fR(8)
to send a node status request to get the NetBIOS name associated with the IP address specified by the
\fIip\fR
parameter.
.RE
.PP
-K|--krb5auth username%password
.RS 3n
Attempt to authenticate a user via Kerberos.
.RE
.PP
-m|--trusted-domains
.RS 3n
Produce a list of domains trusted by the Windows NT server
\fBwinbindd\fR(8)
contacts when resolving names. This list does not include the Windows NT domain the server is a Primary Domain Controller for.
.RE
.PP
-n|--name-to-sid name
.RS 3n
The
\fI-n\fR
option queries
\fBwinbindd\fR(8)
for the SID associated with the name specified. Domain names can be specified before the user name by using the winbind separator character. For example CWDOM1/Administrator refers to the Administrator user in the domain CWDOM1. If no domain is specified then the domain used is the one specified in the
\fBsmb.conf\fR(5)
\fIworkgroup \fR
parameter.
.RE
.PP
-N|--WINS-by-name name
.RS 3n
The
\fI-N\fR
option queries
\fBwinbindd\fR(8)
to query the WINS server for the IP address associated with the NetBIOS name specified by the
\fIname\fR
parameter.
.RE
.PP
--own-domain
.RS 3n
List own domain.
.RE
.PP
-p|--ping
.RS 3n
Check whether winbindd is still alive. Prints out either 'succeeded' or 'failed'.
.RE
.PP
-r|--user-groups username
.RS 3n
Try to obtain the list of UNIX group ids to which the user belongs. This only works for users defined on a Domain Controller.
.RE
.PP
-s|--sid-to-name sid
.RS 3n
Use
\fI-s\fR
to resolve a SID to a name. This is the inverse of the
\fI-n \fR
option above. SIDs must be specified as ASCII strings in the traditional Microsoft format. For example, S-1-5-21-1455342024-3071081365-2475485837-500.
.RE
.PP
--separator
.RS 3n
Get the active winbind separator.
.RE
.PP
--sequence
.RS 3n
Show sequence numbers of all known domains
.RE
.PP
--set-auth-user username%password
.RS 3n
Store username and password used by winbindd during session setup to a domain controller. This enables winbindd to operate in a Windows 2000 domain with Restrict Anonymous turned on (a.k.a. Permissions compatiable with Windows 2000 servers only).
.RE
.PP
-S|--sid-to-uid sid
.RS 3n
Convert a SID to a UNIX user id. If the SID does not correspond to a UNIX user mapped by
\fBwinbindd\fR(8)
then the operation will fail.
.RE
.PP
-t|--check-secret
.RS 3n
Verify that the workstation trust account created when the Samba server is added to the Windows NT domain is working.
.RE
.PP
-u|--domain-users
.RS 3n
This option will list all users available in the Windows NT domain for which the
\fBwinbindd\fR(8)
daemon is operating in. Users in all trusted domains will also be listed. Note that this operation does not assign user ids to any users that have not already been seen by
\fBwinbindd\fR(8)
.
.RE
.PP
--user-domgroups SID
.RS 3n
Get user domain groups.
.RE
.PP
--user-sids SID
.RS 3n
Get user group SIDs for user.
.RE
.PP
-U|--uid-to-sid uid
.RS 3n
Try to convert a UNIX user id to a Windows NT SID. If the uid specified does not refer to one within the idmap uid range then the operation will fail.
.RE
.PP
-Y|--sid-to-gid sid
.RS 3n
Convert a SID to a UNIX group id. If the SID does not correspond to a UNIX group mapped by
\fBwinbindd\fR(8)
then the operation will fail.
.RE
.PP
-V
.RS 3n
Prints the program version number.
.RE
.PP
-h|--help
.RS 3n
Print a summary of command line options.
.RE
.SH "EXIT STATUS"
.PP
The wbinfo program returns 0 if the operation succeeded, or 1 if the operation failed. If the
\fBwinbindd\fR(8)
daemon is not working
wbinfo
will always return failure.
.SH "VERSION"
.PP
This man page is correct for version 3.0 of the Samba suite.
.SH "SEE ALSO"
.PP
\fBwinbindd\fR(8)
and
\fBntlm_auth\fR(1)
.SH "AUTHOR"
.PP
The original Samba software and related utilities were created by Andrew Tridgell. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed.
.PP
wbinfo
and
winbindd
were written by Tim Potter.
.PP
The conversion to DocBook for Samba 2.2 was done by Gerald Carter. The conversion to DocBook XML 4.2 for Samba 3.0 was done by Alexander Bokovoy.

